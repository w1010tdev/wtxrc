# 拖动条和陀螺仪配置指南

## 问题解答

### 1. 如何让居中的slider在居中时输出0.5，在底部时输出0？

**解决方案：使用单极模式 (Unipolar Mode)**

在编辑拖动条时，选择**单极模式（0 到 1）**：

1. 进入编辑模式（点击"✏️ 编辑"按钮）
2. 双击拖动条打开配置对话框
3. 在"值域模式"中选择**单极 (0 到 1)**
4. 保存配置

**效果：**
- 拖动条在**底部**时，输出值为 **0.0**
- 拖动条在**居中**时，输出值为 **0.5**
- 拖动条在**顶部**时，输出值为 **1.0**

如果启用了"自动归中"，释放拖动条后会自动回到居中位置（0.5）。

---

### 2. 如何让陀螺仪转动90度就从0到1？

**解决方案：设置陀螺仪范围为90度**

在驾驶配置中，为使用陀螺仪的轴设置范围为90：

1. 点击顶部的**⚙️ 驾驶配置**按钮
2. 在轴配置表格中找到使用陀螺仪的轴（例如"左摇杆 X"）
3. 确保该轴的"输入源"设置为**陀螺仪**
4. 在"源选择"中选择对应的陀螺仪轴（例如"Gamma (左右)"）
5. 在**陀螺仪范围**列中，将值设置为 **90**
6. 点击**保存**并**重启服务器**

**效果：**
- 陀螺仪在**中立位置**时，输出值为 **0.0**
- 陀螺仪**向一侧转动45度**时，输出值为 **0.5**
- 陀螺仪**向一侧转动90度**时，输出值为 **1.0**（或-1.0，取决于方向）

---

## 配置示例

### 示例1：赛车游戏控制

**需求：**
- 陀螺仪左右倾斜控制转向（±90度范围）
- 一个拖动条控制油门（0到1）
- 另一个拖动条控制刹车（0到1）

**配置步骤：**

1. **创建油门拖动条**
   - 添加新拖动条，命名为"油门"
   - 方向：竖向
   - 值域模式：单极 (0 到 1)
   - 自动归中：关闭（或开启，取决于你的喜好）

2. **创建刹车拖动条**
   - 添加新拖动条，命名为"刹车"
   - 方向：竖向
   - 值域模式：单极 (0 到 1)
   - 自动归中：关闭

3. **配置陀螺仪**
   - 打开驾驶配置
   - 左摇杆 X 轴：
     - 输入源：陀螺仪
     - 源选择：Gamma (左右)
     - 陀螺仪范围：90
     - 死区：0.05
     - 峰值：1.0

4. **配置拖动条轴绑定**
   - 打开驾驶配置
   - 右扳机：
     - 输入源：拖动条
     - 源选择：油门（选择刚才创建的油门拖动条）
   - 左扳机：
     - 输入源：拖动条
     - 源选择：刹车

5. **保存并重启服务器**

---

### 示例2：飞行模拟器控制

**需求：**
- 陀螺仪三轴控制飞机姿态（±90度范围）
- 一个拖动条控制油门（0到1）

**配置步骤：**

1. **创建油门拖动条**
   - 添加新拖动条，命名为"油门"
   - 方向：竖向
   - 值域模式：单极 (0 到 1)
   - 自动归中：关闭

2. **配置陀螺仪三轴**
   - 打开驾驶配置
   - 左摇杆 X 轴（滚转）：
     - 输入源：陀螺仪
     - 源选择：Gamma (左右)
     - 陀螺仪范围：90
   - 左摇杆 Y 轴（俯仰）：
     - 输入源：陀螺仪
     - 源选择：Beta (前后)
     - 陀螺仪范围：90
   - 右摇杆 X 轴（偏航）：
     - 输入源：陀螺仪
     - 源选择：Alpha (旋转)
     - 陀螺仪范围：90

3. **配置油门拖动条**
   - 右扳机：
     - 输入源：拖动条
     - 源选择：油门

4. **保存并重启服务器**

---

## 注意事项

1. **重启服务器**：修改驾驶配置后，必须重启服务器才能生效
2. **值域模式选择**：
   - 单极模式适合：油门、刹车等单方向控制
   - 双极模式适合：转向、俯仰等双向控制
3. **陀螺仪范围**：
   - 较小的范围（如45度）：更灵敏，但容易过度反应
   - 较大的范围（如90度）：更平滑，需要更大的转动角度
4. **死区设置**：适当的死区可以防止抖动，建议0.05左右

---

## 技术细节

### 值域模式的数学原理

**单极模式 (Unipolar: 0 到 1)：**
```
位置 → 输出值
底部/左侧 → 0.0
居中     → 0.5
顶部/右侧 → 1.0
```

**双极模式 (Bipolar: -1 到 1)：**
```
位置 → 输出值
底部/左侧 → -1.0
居中     → 0.0
顶部/右侧 → 1.0
```

### 陀螺仪范围的计算

归一化公式：`normalized_value = gyro_value / gyro_range`

示例：
- 如果 `gyro_range = 90`，陀螺仪转动90度时，`normalized_value = 90 / 90 = 1.0`
- 如果 `gyro_range = 45`，陀螺仪转动45度时，`normalized_value = 45 / 45 = 1.0`

---

## 常见问题

**Q: 为什么我修改了配置，但是没有效果？**  
A: 记得要重启服务器。驾驶配置的修改需要重启才能生效。

**Q: 拖动条自动归中时回到哪个位置？**  
A: 取决于值域模式：
- 单极模式：回到 0.5（居中）
- 双极模式：回到 0.0（居中）

**Q: 陀螺仪范围设置为多少比较合适？**  
A: 这取决于你的使用场景和个人喜好：
- 赛车游戏转向：建议 45-90 度
- 飞行模拟器：建议 60-90 度
- 如果觉得太灵敏，增大范围值
- 如果觉得不够灵敏，减小范围值

**Q: 可以同时使用陀螺仪和拖动条控制同一个轴吗？**  
A: 不建议。这会导致冲突，两个输入源的值会相互覆盖。每个轴应该只绑定一个输入源。
